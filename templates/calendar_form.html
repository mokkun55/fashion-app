{% extends "base.html" %} {% block title %}{% if schedule %}予定を編集{% else
%}予定を追加{% endif %} - fashion-app{% endblock %} {% block content %}
<div class="max-w-2xl mx-auto">
  <div class="bg-white rounded-lg shadow-md p-6">
    <h1 class="text-2xl font-bold text-gray-900 mb-6">
      {% if schedule %}予定を編集{% else %}予定を追加{% endif %}
    </h1>

    <form
      method="POST"
      action="{% if schedule %}{{ url_for('calendar_update', schedule_id=schedule.id) }}{% else %}{{ url_for('calendar_add') }}{% endif %}"
      class="space-y-6"
    >
      <!-- 日付 -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          日付 <span class="text-red-500">*</span>
        </label>
        <input
          type="date"
          name="date"
          {%
          if
          schedule
          %}value="{{ schedule.date.strftime('%Y-%m-%d') }}"
          {%
          endif
          %}
          required
          class="block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"
        />
        <p class="mt-1 text-xs text-gray-500">予定の日付を選択してください</p>
      </div>

      <!-- 予定の種類 -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          予定の種類 <span class="text-red-500">*</span>
        </label>
        <div class="grid grid-cols-3 gap-3">
          <label
            class="relative flex cursor-pointer rounded-lg border p-4 focus:outline-none {% if schedule and schedule.purpose == '大学' %}border-green-500 bg-green-50{% else %}border-gray-300 hover:border-gray-400{% endif %}"
          >
            <input type="radio" name="purpose" value="大学" {% if not schedule
            or schedule.purpose == '大学' %}checked{% endif %} required
            class="sr-only"
            onchange="this.form.querySelectorAll('label').forEach(l =>
            l.classList.remove('border-green-500', 'bg-green-50',
            'border-purple-500', 'bg-purple-50', 'border-pink-500',
            'bg-pink-50')); this.parentElement.classList.add('border-green-500',
            'bg-green-50');" />
            <span class="flex flex-1 flex-col items-center">
              <span class="text-sm font-medium text-gray-900">大学</span>
              <span class="text-xs text-gray-500">カジュアル</span>
            </span>
          </label>

          <label
            class="relative flex cursor-pointer rounded-lg border p-4 focus:outline-none {% if schedule and schedule.purpose == '企業' %}border-purple-500 bg-purple-50{% else %}border-gray-300 hover:border-gray-400{% endif %}"
          >
            <input type="radio" name="purpose" value="企業" {% if schedule and
            schedule.purpose == '企業' %}checked{% endif %} required
            class="sr-only"
            onchange="this.form.querySelectorAll('label').forEach(l =>
            l.classList.remove('border-green-500', 'bg-green-50',
            'border-purple-500', 'bg-purple-50', 'border-pink-500',
            'bg-pink-50'));
            this.parentElement.classList.add('border-purple-500',
            'bg-purple-50');" />
            <span class="flex flex-1 flex-col items-center">
              <span class="text-sm font-medium text-gray-900">企業</span>
              <span class="text-xs text-gray-500">フォーマル</span>
            </span>
          </label>

          <label
            class="relative flex cursor-pointer rounded-lg border p-4 focus:outline-none {% if schedule and schedule.purpose == 'デート' %}border-pink-500 bg-pink-50{% else %}border-gray-300 hover:border-gray-400{% endif %}"
          >
            <input type="radio" name="purpose" value="デート" {% if schedule and
            schedule.purpose == 'デート' %}checked{% endif %} required
            class="sr-only"
            onchange="this.form.querySelectorAll('label').forEach(l =>
            l.classList.remove('border-green-500', 'bg-green-50',
            'border-purple-500', 'bg-purple-50', 'border-pink-500',
            'bg-pink-50')); this.parentElement.classList.add('border-pink-500',
            'bg-pink-50');" />
            <span class="flex flex-1 flex-col items-center">
              <span class="text-sm font-medium text-gray-900">デート</span>
              <span class="text-xs text-gray-500">おしゃれ</span>
            </span>
          </label>
        </div>
      </div>

      <!-- メモ（オプション） -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          メモ（任意）
        </label>
        <input
          type="text"
          name="memo"
          {%
          if
          schedule
          %}value="{{ schedule.memo }}"
          {%
          endif
          %}
          placeholder="例: 午後から面接"
          maxlength="200"
          class="block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"
        />
        <p class="mt-1 text-xs text-gray-500">
          予定に関するメモを追加できます（最大200文字）
        </p>
      </div>

      <!-- アクションボタン -->
      <div class="flex gap-3 pt-4">
        <button
          type="submit"
          class="flex-1 px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
        >
          {% if schedule %}更新{% else %}追加{% endif %}
        </button>
        <a
          href="{{ url_for('calendar') }}"
          class="flex-1 text-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
        >
          キャンセル
        </a>
      </div>
    </form>
  </div>
</div>
{% endblock %}
